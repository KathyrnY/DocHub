{{> sidenav}}
<div class="container navbar-padding">
  <div class="row">
    <div class="col col-lg-6">
      {{!-- {{#each patientDetails}} --}}
      <div class="card">
        {{!-- {{} chartData as |patientDetails|}} --}}
        <div class="card-body">
          <div class="patient-data">
            <p><b>Patient Id:</b> {{healthExtData.id}}</p>
            <p><b>Name:</b> {{healthExtData.first_name}} {{healthExtData.last_name}}</p>
            <p><b>Gender: </b>{{healthExtData.gender}}</p>
            <p><b>Age:</b> {{healthExtData.age}}</p>
            <p><b>Race: </b>{{healthExtData.race}}</p>
            <p><b>Insurance:</b>{{healthExtData.insurancename}}</p>
            <p> <b>Occupation:</b>{{healthExtData.occupation}}</p>
            <p><b>Phone #:</b>{{healthExtData.phoneno}}</p>
            <p><b>Address:</b> {{healthExtData.street_address}}</p>
          </div>
        </div>
        {{!-- {{/if}} --}}

        {{#if this.healthExtData}}
        <div class="card-body">
          {{#each healthExtData.healthdetailsexts}}
          <div class="health-details-ext">
            <p><b>Known Condition:</b> {{this.condition}}</p>
            {{!-- <p><b>Allergies:</b> {{this.type}}</p> --}}
          </div>
          {{/each}}
        </div>
        {{/if}}

        {{#if this.testResultsData}}
        <div class="card-body">
          {{#each testResultsData.TestResults}}
          <div class="test-results">
            <p> <b>Test Name:</b>{{this.testname}}</p>
            <p><b>Test Results:</b> {{this.testresults}}</p>
            <p><b>Doctor's Comments:</b> {{this.doctorscomments}}</p>
          </div>
          {{/each}}
        </div>
        {{/if}}

        {{#if this.healthData}}
        <div class="card-body">
          {{#each healthData.healthdetails}}
          <div class="health-details">
            <p><b>Progress Notes:</b> {{this.progressnotes}}</p>
            <p><b>Evaluation and Plan:</b> {{this.evaluationandplan}}</p>
            <p><b>Prescription Details:</b> {{this.prescriptiondetails}}</p>
          </div>
          {{/each}}
        </div>
        {{/if}}
        {{#if this.commentData}}
        <div class="card-body">
          {{#each commentData.patient_comments}}
          <div class="comment-info">
            <p><b>Previous Appointment Comment:</b>{{this.comment_text}}</p>
            <p><b>Created At:</b>{{this.createdAt}}</p>
          </div>
          {{/each}}
        </div>
        {{/if}}
      </div>
      <!-- Button trigger modal -->
      <a href="/dashboard" class="btn btn-primary mt-2">&#8592; Back</a>
      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" id="comment">
        Add Comments
      </button>
      <button type="button" class="btn btn-primary" id="newappt" data-bs-toggle="modal" data-bs-target="#apptModal">
        + New Appointment
      </button>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Comments</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="text" name="comments" class="border border-none">
        {{comments}}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button id="saveBtn" type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
</div>

<!-- Modal for date picker-->
<div class="modal fade" id="apptModal" tabindex="-1" aria-labelledby="apptModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="apptModalLabel">Please Pick a Date and Time</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form action="/action_page.php">
          <label for="time">Choose Your Appt date and time</label>
          <input type="text" class="date-picker" id="date" />
          <select id="time" name="time">
            <option value="8:00">8:00</option>
            <option value="8:30">8:30</option>
            <option value="9:00">9:00</option>
            <option value="9:30">9:30</option>
            <option value="10:00">10:00</option>
            <option value="10:30">10:30</option>
            <option value="11:00">11:00</option>
            <option value="11:30">11:30</option>
            <option value="12:00">12:00</option>
            <option value="12:30">12:30</option>
            <option value="13:00">1:00</option>
            <option value="13:30">1:30</option>
            <option value="14:00">2:00</option>
            <option value="14:30">2:30</option>
            <option value="15:00">3:00</option>
            <option value="15:30">3:30</option>
            <option value="16:00">4:00</option>
            <option value="16:30">4:30</option>
            <option value="17:00">5:00</option>
            <option value="17:30">5:30</option>
            <option value="18:00">6:00</option>
            <option value="18:30">6:30</option>
          </select>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button id="Apptsubmit" type="button" class="btn btn-primary" data-bs-dismiss="modal">Submit</button>
      </div>
    </div>
  </div>
</div>
</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
<script src="/js/patientchart.js"></script>
<script src="/js/date-picker.js"></script>